2018-05-13 23:40:16,898 5343 [AWT-EventQueue-0] ERROR core.MainWindow - java.sql.SQLException: Chyba pri filtrovaní operácií podľa stredisiek.
java.util.concurrent.ExecutionException: java.sql.SQLException: Chyba pri filtrovaní operácií podľa stredisiek.
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at javax.swing.SwingWorker.get(SwingWorker.java:602)
	at core.MainWindow$20.done(MainWindow.java:731)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)
Caused by: java.sql.SQLException: Chyba pri filtrovaní operácií podľa stredisiek.
	at core.OperationsList.filterCurrentOps(OperationsList.java:89)
	at core.MainWindow$20.doInBackground(MainWindow.java:721)
	at core.MainWindow$20.doInBackground(MainWindow.java:714)
	at javax.swing.SwingWorker$1.call(SwingWorker.java:295)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at javax.swing.SwingWorker.run(SwingWorker.java:334)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLException: Chyba pri vykonávaní SQL skriptu. 
SELECT A.orderno, A.opno, A.endOriginal, B.mfop_planqty, B.rtcen_name, F.goodinc, B.imast_descext, B.mfop_remarks, B.mford_delstore, F.startreal, F.endreal, A.endLatest, C.futurePlanned, E.category, E.note, A.manualEnd, D.pastPlanned, B.mford_item, B.mford_duedate FROM (SELECT orderno, opno, endLatest, endOriginal, manualEnd FROM AHP.dbo.u_Zmeny) AS A LEFT JOIN (SELECT imast_descext, mfop_remarks, mford_delstore, mfop_orderno, mfop_opno, mfop_planqty, rtcen_name, mford_item, mford_duedate FROM MAX2ostr.maxmast.mfop JOIN MAX2ostr.maxmast.rtcen ON mfop_workcen = rtcen_workcen JOIN MAX2ostr.maxmast.mford ON mford_orderno = mfop_orderno JOIN MAX2ostr.maxmast.imast ON imast_item = mford_item GROUP BY mfop_orderno, mfop_opno, imast_descext, mfop_remarks, mford_delstore, rtcen_name, mford_item, mfop_planqty, mford_duedate) AS B ON A.orderno = B.mfop_orderno AND A.opno = B.mfop_opno LEFT JOIN (SELECT Zakazka, Operacia, SUM(Mnozstvo) AS futurePlanned FROM AHP.dbo.fn_Plan(CURRENT_TIMESTAMP,'2200-01-01') GROUP BY Zakazka, Operacia) AS C ON C.Zakazka = A.orderno AND C.Operacia = A.opno LEFT JOIN  (SELECT Zakazka, Operacia, SUM(Mnozstvo) AS pastPlanned FROM AHP.dbo.fn_Plan('2017-01-01', DATEADD(day, -1, CURRENT_TIMESTAMP)) GROUP BY Zakazka, Operacia) AS D ON D.Zakazka = A.orderno AND D.Operacia = A.opno LEFT JOIN AHP.dbo.u_Poznamky AS E ON A.orderno = E.orderno AND A.opno = E.opno LEFT JOIN (SELECT mftrn_orderno, mftrn_opno, MIN(mftrn_date) AS startreal, MAX(mftrn_date) AS endreal, SUM(mftrn_goodinc) AS goodinc FROM MAX2ostr.maxmast.mftrn GROUP BY mftrn_orderno, mftrn_opno) AS F ON A.orderno = F.mftrn_orderno AND A.opno = F.mftrn_opno WHEREsad (A.endOriginal BETWEEN '2018-05-06' AND '2018-05-13') OR (F.startreal BETWEEN '2018-05-06' AND '2018-05-13') OR (A.endLatest BETWEEN '2018-05-06' AND '2018-05-13') OR (F.endreal BETWEEN '2018-05-06' AND '2018-05-13') OR (((B.mfop_planqty > F.goodinc AND C.futurePlanned IS NULL) OR (C.futurePlanned IS NULL AND F.goodinc IS NULL) OR (B.mfop_planqty > C.futurePlanned AND F.goodinc < B.mfop_planqty) OR (B.mfop_planqty > C.futurePlanned AND F.goodinc IS NULL)) AND (A.manualEnd IS NULL)) ORDER BY A.orderno, A.opno
	at utils.DBUtils.executeQuery(DBUtils.java:43)
	at core.OperationsList.filterCurrentOps(OperationsList.java:58)
	... 8 common frames omitted
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near 'WHEREsad'.
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:285)
	at utils.DBUtils.executeQuery(DBUtils.java:41)
	... 9 common frames omitted
2018-05-13 23:41:16,482 4300 [AWT-EventQueue-0] ERROR core.MainWindow - java.sql.SQLException: Chyba pri filtrovaní operácií podľa stredisiek.
java.util.concurrent.ExecutionException: java.sql.SQLException: Chyba pri filtrovaní operácií podľa stredisiek.
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at javax.swing.SwingWorker.get(SwingWorker.java:602)
	at core.MainWindow$20.done(MainWindow.java:731)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)
Caused by: java.sql.SQLException: Chyba pri filtrovaní operácií podľa stredisiek.
	at core.OperationsList.filterCurrentOps(OperationsList.java:89)
	at core.MainWindow$20.doInBackground(MainWindow.java:721)
	at core.MainWindow$20.doInBackground(MainWindow.java:714)
	at javax.swing.SwingWorker$1.call(SwingWorker.java:295)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at javax.swing.SwingWorker.run(SwingWorker.java:334)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.sql.SQLException: Chyba pri vykonávaní SQL skriptu. 
SELECT A.orderno, A.opno, A.endOriginal, B.mfop_planqty, B.rtcen_name, F.goodinc, B.imast_descext, B.mfop_remarks, B.mford_delstore, F.startreal, F.endreal, A.endLatest, C.futurePlanned, E.category, E.note, A.manualEnd, D.pastPlanned, B.mford_item, B.mford_duedate FROM (SELECT orderno, opno, endLatest, endOriginal, manualEnd FROM AHP.dbo.u_Zmeny) AS A LEFT JOIN (SELECT imast_descext, mfop_remarks, mford_delstore, mfop_orderno, mfop_opno, mfop_planqty, rtcen_name, mford_item, mford_duedate FROM MAX2ostr.maxmast.mfop JOIN MAX2ostr.maxmast.rtcen ON mfop_workcen = rtcen_workcen JOIN MAX2ostr.maxmast.mford ON mford_orderno = mfop_orderno JOIN MAX2ostr.maxmast.imast ON imast_item = mford_item GROUP BY mfop_orderno, mfop_opno, imast_descext, mfop_remarks, mford_delstore, rtcen_name, mford_item, mfop_planqty, mford_duedate) AS B ON A.orderno = B.mfop_orderno AND A.opno = B.mfop_opno LEFT JOIN (SELECT Zakazka, Operacia, SUM(Mnozstvo) AS futurePlanned FROM AHP.dbo.fn_Plan(CURRENT_TIMESTAMP,'2200-01-01') GROUP BY Zakazka, Operacia) AS C ON C.Zakazka = A.orderno AND C.Operacia = A.opno LEFT JOIN  (SELECT Zakazka, Operacia, SUM(Mnozstvo) AS pastPlanned FROM AHP.dbo.fn_Plan('2017-01-01', DATEADD(day, -1, CURRENT_TIMESTAMP)) GROUP BY Zakazka, Operacia) AS D ON D.Zakazka = A.orderno AND D.Operacia = A.opno LEFT JOIN AHP.dbo.u_Poznamky AS E ON A.orderno = E.orderno AND A.opno = E.opno LEFT JOIN (SELECT mftrn_orderno, mftrn_opno, MIN(mftrn_date) AS startreal, MAX(mftrn_date) AS endreal, SUM(mftrn_goodinc) AS goodinc FROM MAX2ostr.maxmast.mftrn GROUP BY mftrn_orderno, mftrn_opno) AS F ON A.orderno = F.mftrn_orderno AND A.opno = F.mftrn_opno WHEREsad (A.endOriginal BETWEEN '2018-05-06' AND '2018-05-13') OR (F.startreal BETWEEN '2018-05-06' AND '2018-05-13') OR (A.endLatest BETWEEN '2018-05-06' AND '2018-05-13') OR (F.endreal BETWEEN '2018-05-06' AND '2018-05-13') OR (((B.mfop_planqty > F.goodinc AND C.futurePlanned IS NULL) OR (C.futurePlanned IS NULL AND F.goodinc IS NULL) OR (B.mfop_planqty > C.futurePlanned AND F.goodinc < B.mfop_planqty) OR (B.mfop_planqty > C.futurePlanned AND F.goodinc IS NULL)) AND (A.manualEnd IS NULL)) ORDER BY A.orderno, A.opno
	at utils.DBUtils.executeQuery(DBUtils.java:43)
	at core.OperationsList.filterCurrentOps(OperationsList.java:58)
	... 8 common frames omitted
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near 'WHEREsad'.
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155)
	at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:285)
	at utils.DBUtils.executeQuery(DBUtils.java:41)
	... 9 common frames omitted
